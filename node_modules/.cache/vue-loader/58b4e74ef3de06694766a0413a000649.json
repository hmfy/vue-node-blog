{"remainingRequest":"D:\\Learn\\blog-person\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Learn\\blog-person\\src\\views\\Home.vue?vue&type=style&index=0&id=fae5bece&scoped=true&lang=css&","dependencies":[{"path":"D:\\Learn\\blog-person\\src\\views\\Home.vue","mtime":1578502395942},{"path":"D:\\Learn\\blog-person\\node_modules\\css-loader\\dist\\cjs.js","mtime":1577118249893},{"path":"D:\\Learn\\blog-person\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1577118252216},{"path":"D:\\Learn\\blog-person\\node_modules\\postcss-loader\\src\\index.js","mtime":1572976729857},{"path":"D:\\Learn\\blog-person\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1572976728968},{"path":"D:\\Learn\\blog-person\\node_modules\\vue-loader\\lib\\index.js","mtime":1577118252216}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnJvdyB7CiAgICBtYXJnaW4tYm90dG9tOiAyMHB4Owp9CgouZW1wdHktc2hvdyB7CiAgICBjb2xvcjogIzkwOTM5OTsKfQo="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6FA;AACA;AACA;;AAEA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div>\n        <div v-if=\"itemList.length\">\n            <div class=\"row\" v-for=\"item in itemList\" :key=\"item.id\">\n                <article-item :article=\"item\"/>\n            </div>\n            <transition name=\"el-fade-in-linear\">\n                <div v-show=\"!busy && count < totalBlog\"\n                     v-loading=\"true\"\n                     element-loading-text=\"拼命加载中\"\n                     style=\"height: 100px\">\n                </div>\n            </transition>\n        </div>\n        <div v-else class=\"empty-show\">\n            这里空空如也,赶紧去创作吧...\n        </div>\n    </div>\n</template>\n\n<script>\n    import ArticleItem from \"../components/ArticleItem\";\n    import {mapGetters, mapState, mapMutations} from \"vuex\";\n\n    export default {\n        data(){\n          return {\n              itemList: []\n          }\n        },\n        components: {\n            ArticleItem\n        },\n        methods: {\n            ...mapMutations('home', [\"updateBusy\"]),\n            getArticleList (count, callback = ()=>{}) {\n                console.log(this.filterBlog)\n                callback(); // 改变busy,滚动不加载\n                this.axios({\n                    url: '/getArticleListLazy',\n                    params: {\n                        myCount: count,\n                        filterBlog: this.filterBlog\n                    }\n                }).then(res => {\n                    this.itemList.length = 0;\n                    res.data.forEach(ele=>{\n                        ele.content = ele.content.substr(0, 200);\n                        ele.ctime = this.$date_format(ele.ctime);\n                        ele.utime = ele.utime && this.$date_format(ele.utime);\n                        this.itemList.push(ele);\n                    });\n                    callback(); // 改变busy,滚动继续加载\n                }).catch(err => {\n                    console.log(err);\n                    callback(); // 改变busy,滚动继续加载\n                })\n            }\n        },\n        watch: {\n            count (val) {\n                if (val > this.totalBlog) {\n                    return\n                }\n                // 根页面滚动了,开始请求文章\n                this.getArticleList(val, this.updateBusy)\n            },\n            filterBlog () {\n                console.log(this.busy, this.count, this.totalBlog)\n                this.getArticleList(this.count);\n                this.$listeners[\"initBlogLength\"](); // 重置totalBlog\n                this.$store.commit('home/updateCount', 0); // 重置count\n            }\n        },\n        computed: {\n            ...mapGetters({\n                phone: \"getDeviceIsPhone\"\n            }),\n            ...mapGetters(\"home\", [\"noMore\"]),\n            ...mapState(\"home\", [\"count\", \"busy\", \"totalBlog\", \"filterBlog\"])\n        },\n        created() {\n            const store = this.$store;\n            store.commit(\"setLeftTagsLine\", {\n                cloudTags: !this.phone,\n                leftCol: this.phone ? 24 : 16\n            });\n            this.getArticleList(this.count);\n        }\n    }\n</script>\n\n<style scoped>\n    .row {\n        margin-bottom: 20px;\n    }\n\n    .empty-show {\n        color: #909399;\n    }\n</style>\n"]}]}