{"remainingRequest":"D:\\Learn\\blog-person\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Learn\\blog-person\\src\\views\\BlogDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Learn\\blog-person\\src\\views\\BlogDetail.vue","mtime":1578496070935},{"path":"D:\\Learn\\blog-person\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1572976728968},{"path":"D:\\Learn\\blog-person\\node_modules\\vue-loader\\lib\\index.js","mtime":1577118252216}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBDb21tZW50cyBmcm9tICIuLi9jb21wb25lbnRzL0NvbW1lbnRzIjsKaW1wb3J0IEVkaXRDb21tZW50cyBmcm9tICIuLi9jb21wb25lbnRzL0VkaXRDb21tZW50cyI7CmltcG9ydCB7bWFwR2V0dGVyc30gZnJvbSAidnVleCI7CgpleHBvcnQgZGVmYXVsdCB7CiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGN1cnJlbnRBcnRpY2xlOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogJycsCiAgICAgICAgICAgICAgICBjb250ZW50OiAnJywKICAgICAgICAgICAgICAgIHZpZXdzOiAwLAogICAgICAgICAgICAgICAgY3RpbWU6ICcyMDE5LTAxLTAxJywKICAgICAgICAgICAgICAgIHRhZ3M6ICcnLAogICAgICAgICAgICAgICAgY29tbWVudENvdW50OiAnJwogICAgICAgICAgICB9LAogICAgICAgICAgICBhcnRpY2xlSWQ6IDAsCiAgICAgICAgICAgIGNvbW1lbnRTdGF0ZTogZmFsc2UsCiAgICAgICAgICAgIGdvb2RTdGF0ZTogZmFsc2UsCiAgICAgICAgICAgIGdvb2RDb250ZW50OiAn5p2l54K55Liq6LWe5ZCnficKICAgICAgICB9CiAgICB9LAogICAgY29tcG9uZW50czogewogICAgICAgIENvbW1lbnRzLAogICAgICAgIEVkaXRDb21tZW50cwogICAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICAgICAgLi4ubWFwR2V0dGVycyh7CiAgICAgICAgICAgIHBob25lOiAiZ2V0RGV2aWNlSXNQaG9uZSIKICAgICAgICB9KSwKICAgICAgICAuLi5tYXBHZXR0ZXJzKHsKICAgICAgICAgICAgaXA6ICJnZXRJUCIKICAgICAgICB9KQogICAgfSwKICAgIHByb3ZpZGUoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgc2Nyb2xsUmVwbHk6IHRoaXMuc2Nyb2xsUmVwbHkKICAgICAgICB9CiAgICB9LAogICAgbmFtZTogImJsb2dEZXRhaWwiLAogICAgbWV0aG9kczogewogICAgICAgIGNoYW5nZVN0YXRlKCkgewogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoImJsb2cvdXBkYXRlQ29tbWVudFN0YXRlIiwge30pOwogICAgICAgICAgICB0aGlzLnNjcm9sbFJlcGx5KCk7CiAgICAgICAgfSwKICAgICAgICBzY3JvbGxSZXBseSgpIHsKICAgICAgICAgICAgY29uc3Qgb2Zmc2V0SGVpZ2h0ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm9mZnNldEhlaWdodDsKICAgICAgICAgICAgY29uc3Qgd2luZG93SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0OwoKICAgICAgICAgICAgZnVuY3Rpb24gc3RlcCgpIHsKICAgICAgICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCB3aW5kb3cuc2Nyb2xsWSArIDQwKTsKICAgICAgICAgICAgICAgIGlmICh3aW5kb3cuc2Nyb2xsWSA8IG9mZnNldEhlaWdodCAtIHdpbmRvd0hlaWdodCkgewogICAgICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShzdGVwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0ZXApOwogICAgICAgIH0sCiAgICAgICAgYXN5bmMgdXBkYXRlTGlzdChzdGF0ZSkgewogICAgICAgICAgICB0aGlzLmNvbW1lbnRTdGF0ZSA9IHN0YXRlOyAvLyDmj5DkuqTnu4Tku7bmj5Dlj4rml7bop6blj5HniLbnuqfkuovku7bmlLnlj5jnirbmgIEs6KKr5Y+m5LiA5a2Q57uE5Lu255uR5ZCs5YiwCgogICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmdldEFydGljbGVEZXRhaWwoKTsKICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gcmVzLmRhdGFbMF0ubGVuZ3RoICYmIHJlcy5kYXRhWzBdWzBdOwogICAgICAgICAgICB0aGlzLmN1cnJlbnRBcnRpY2xlLmNvbW1lbnRDb3VudCA9IHJlc3VsdC5jb21tZW50Q291bnQ7CiAgICAgICAgfSwKICAgICAgICBhZGRHb29kICgpIHsKICAgICAgICAgICAgLy8g5pu05paw54K56LWe5pWwCiAgICAgICAgICAgIHJldHVybiB0aGlzLmF4aW9zKHsKICAgICAgICAgICAgICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgICAgICAgICAgICAgdXJsOiAnL3VwZGF0ZUdvb2RzJywKICAgICAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICAgICAgICBpcDogdGhpcy5pcCwKICAgICAgICAgICAgICAgICAgICBpZDogdGhpcy5hcnRpY2xlSWQsCiAgICAgICAgICAgICAgICAgICAgdlRpbWU6IG5ldyBEYXRlKCkuZ2V0VGltZSgpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6IDEgLy/mmoLml7blj6rlvIDmlL7mlofnq6DngrnotZ4oMeS4uuaWh+eroCwy5Li66K+E6K66KQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgYXN5bmMgdXBkYXRlR29vZHMgKCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgaWYgKHRoaXMuZ29vZFN0YXRlKSB7CiAgICAgICAgICAgICAgICAgICAgLy8g5oKo5bey57uP54K56L+H6LWe5ZKvIQogICAgICAgICAgICAgICAgICAgIC8vIOW8ueeql+aPkOekugoKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5nb29kU3RhdGUgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZ29vZENvbnRlbnQgPSAn5oKo5bey57uP54K56L+H6LWe5LqG5ZOffic7CiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGRHb29kKCk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5nZXRBcnRpY2xlRGV0YWlsKCk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gcmVzLmRhdGFbMF0ubGVuZ3RoICYmIHJlcy5kYXRhWzBdWzBdOwogICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEFydGljbGUuZ29vZCA9IHJlc3VsdC5nb29kOwogICAgICAgICAgICAgICAgICAgIC8vIOeCuei1nuWKqOeUu+W8gOWniwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9Y2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGdldEFydGljbGVEZXRhaWwgKCkgewogICAgICAgICAgICAvLyDojrflj5bmlofnq6Dor6bnu4bkv6Hmga8KICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXhpb3MoewogICAgICAgICAgICAgICAgdXJsOiAnL2dldEFydGljbGVEZXRhaWwnLAogICAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IHRoaXMuYXJ0aWNsZUlkCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBnZXRSZWFkZXIoKSB7CiAgICAgICAgICAgIC8vIOiOt+WPluivu+iAheWfuuacrOS/oeaBrygyNOWwj+aXtuWGheaYr+WQpumYheivu+i/hykKICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXhpb3MoewogICAgICAgICAgICAgICAgdXJsOiAnL2dldFZpZXdzSW5mbycsCiAgICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgICAgICBpcDogdGhpcy5pcCwKICAgICAgICAgICAgICAgICAgICBpZDogdGhpcy5hcnRpY2xlSWQKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIHVwZGF0ZVZpZXdzKCkgewogICAgICAgICAgICAvLyDmm7TmlrDmlofnq6DpmIXor7vph4/ku6Xlj4pibG9nX3ZpZXdz6KGoKOaaguaXtui/mOayoeaDs+WlvSkKICAgICAgICAgICAgdGhpcy5heGlvcyh7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICdwb3N0JywKICAgICAgICAgICAgICAgIHVybDogJy9zZXRWaWV3cycsCiAgICAgICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICAgICAgaXA6IHRoaXMuaXAsCiAgICAgICAgICAgICAgICAgICAgaWQ6IHRoaXMuYXJ0aWNsZUlkLAogICAgICAgICAgICAgICAgICAgIHZUaW1lOiBuZXcgRGF0ZSgpLmdldFRpbWUoKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgIH0KICAgIH0sCiAgICBhc3luYyBjcmVhdGVkKCkgewogICAgICAgIGxldCBpZCA9IHRoaXMuJHJvdXRlLnBhcmFtc1siaWQiXTsKICAgICAgICBpZiAoaWQpIHsKICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgiY3VyckFydGljbGUiLCBpZCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWQgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJjdXJyQXJ0aWNsZSIpOwogICAgICAgIH0KICAgICAgICB0aGlzLmFydGljbGVJZCA9IGlkOwoKICAgICAgICB0cnkgewogICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmdldEFydGljbGVEZXRhaWwoKTsKICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gcmVzLmRhdGFbMF0ubGVuZ3RoICYmIHJlcy5kYXRhWzBdWzBdOwogICAgICAgICAgICB0aGlzLmN1cnJlbnRBcnRpY2xlLmNvbW1lbnRDb3VudCA9IHJlc3VsdC5jb21tZW50Q291bnQ7CiAgICAgICAgICAgIHRoaXMuY3VycmVudEFydGljbGUgPSByZXN1bHQ7CiAgICAgICAgICAgIHRoaXMuY3VycmVudEFydGljbGUudGl0bGUgPSByZXN1bHQudGl0bGU7CiAgICAgICAgICAgIHRoaXMuY3VycmVudEFydGljbGUuY29udGVudCA9IHJlc3VsdC5jb250ZW50OwogICAgICAgICAgICB0aGlzLmN1cnJlbnRBcnRpY2xlLnZpZXdzID0gcmVzdWx0LnZpZXdzOwogICAgICAgICAgICB0aGlzLmN1cnJlbnRBcnRpY2xlLnRhZ3MgPSByZXN1bHQudGFnczsKICAgICAgICAgICAgdGhpcy5jdXJyZW50QXJ0aWNsZS5nb29kID0gcmVzdWx0Lmdvb2Q7CiAgICAgICAgICAgIHRoaXMuY3VycmVudEFydGljbGUuY3RpbWUgPSByZXN1bHQuY3RpbWU7CiAgICAgICAgfWNhdGNoIChlKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpCiAgICAgICAgfQogICAgfSwKICAgIGFzeW5jIGJlZm9yZU1vdW50KCkgewogICAgICAgIGNvbnN0IHN0b3JlID0gdGhpcy4kc3RvcmU7CiAgICAgICAgc3RvcmUuY29tbWl0KCJzZXRMZWZ0VGFnc0xpbmUiLCB7CiAgICAgICAgICAgIGxlZnRDb2w6IDI0CiAgICAgICAgfSk7CgogICAgICAgIC8vIOaWh+eroOmYheivu+mHj+abtOaWsOaTjeS9nC4uLgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGNvbnN0IHJlYWRlclJlc3VsdCA9IGF3YWl0IHRoaXMuZ2V0UmVhZGVyKCk7CiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSByZWFkZXJSZXN1bHQuZGF0YVswXTsKICAgICAgICAgICAgaWYgKHJlYWRlclJlc3VsdC5kYXRhWzFdLmxlbmd0aCkgewogICAgICAgICAgICAgICAgLy8g5b2T5YmN55So5oi35bey57uP54K56LWe6L+HKOmZkElQKQogICAgICAgICAgICAgICAgdGhpcy5nb29kU3RhdGUgPSB0cnVlOwogICAgICAgICAgICAgICAgdGhpcy5nb29kQ29udGVudCA9ICfmgqjlt7Lnu4/ngrnov4fotZ7kuoblk59+JzsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoZGF0YS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHZUaW1lID0gZGF0YVswXVsndnRpbWUnXTsKICAgICAgICAgICAgICAgIGxldCBkaWZmZXJlbmNlID0gKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gdlRpbWUpIC8gMTAwMCAvIDYwIC8gNjA7CiAgICAgICAgICAgICAgICBpZiAoZGlmZmVyZW5jZSA+IDI0KSB7CiAgICAgICAgICAgICAgICAgICAgLy8g5LiA5aSp5YaF55qE6ZiF6K+75qyh5pWw5Y+q566X5LiA5qyhCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVWaWV3cygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVWaWV3cygpOwogICAgICAgICAgICB9CiAgICAgICAgfWNhdGNoIChlKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpCiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["BlogDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BlogDetail.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <div>\r\n        <el-card class=\"box-card\">\r\n            <div class=\"blog-title\">\r\n                <h1>{{ currentArticle.title }}</h1>\r\n                <p>\r\n                    <span class=\"reset-left-margin\">{{ $date_format(currentArticle.ctime) }}</span>\r\n                    <el-divider direction=\"vertical\" v-if=\"!phone\"/>\r\n                    <br v-if=\"phone\">\r\n                    <span :class=\"{'reset-left-margin': phone}\">阅读 {{ currentArticle.views || 0 }}</span>\r\n                    <el-divider direction=\"vertical\"/>\r\n                    <span>评论 {{ currentArticle.commentCount }}</span>\r\n                    <el-divider direction=\"vertical\"/>\r\n                    <el-tag type=\"success\" v-for=\"tag in currentArticle.tags.split(',')\">{{ tag }}</el-tag>\r\n                </p>\r\n            </div>\r\n            <div class=\"ql-snow\">\r\n                <div class=\"ql-editor\" v-html=\"currentArticle.content\"></div>\r\n            </div>\r\n            <div class=\"blog-reply-good\">\r\n                <el-tooltip effect=\"light\" :content=\"goodContent\" placement=\"top-start\">\r\n                    <span class=\"self-good\" :class=\"{'is-active': goodState}\" @click=\"updateGoods\"></span>\r\n                </el-tooltip>\r\n                ({{ currentArticle.good || 0 }})\r\n                <el-divider direction=\"vertical\"/>\r\n                <span @click=\"changeState\">评论</span>\r\n            </div>\r\n        </el-card>\r\n        <!--评论区-->\r\n        <comments :arId=\"articleId\" :refresh=\"commentState\"/>\r\n        <!--留言板-->\r\n        <edit-comments :arId=\"articleId\" :refresh=\"commentState\" @refreshComments=\"updateList\" v-on=\"$listeners\"/>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import Comments from \"../components/Comments\";\r\n    import EditComments from \"../components/EditComments\";\r\n    import {mapGetters} from \"vuex\";\r\n\r\n    export default {\r\n        data() {\r\n            return {\r\n                currentArticle: {\r\n                    title: '',\r\n                    content: '',\r\n                    views: 0,\r\n                    ctime: '2019-01-01',\r\n                    tags: '',\r\n                    commentCount: ''\r\n                },\r\n                articleId: 0,\r\n                commentState: false,\r\n                goodState: false,\r\n                goodContent: '来点个赞吧~'\r\n            }\r\n        },\r\n        components: {\r\n            Comments,\r\n            EditComments\r\n        },\r\n        computed: {\r\n            ...mapGetters({\r\n                phone: \"getDeviceIsPhone\"\r\n            }),\r\n            ...mapGetters({\r\n                ip: \"getIP\"\r\n            })\r\n        },\r\n        provide() {\r\n            return {\r\n                scrollReply: this.scrollReply\r\n            }\r\n        },\r\n        name: \"blogDetail\",\r\n        methods: {\r\n            changeState() {\r\n                this.$store.commit(\"blog/updateCommentState\", {});\r\n                this.scrollReply();\r\n            },\r\n            scrollReply() {\r\n                const offsetHeight = document.documentElement.offsetHeight;\r\n                const windowHeight = window.innerHeight;\r\n\r\n                function step() {\r\n                    window.scrollTo(0, window.scrollY + 40);\r\n                    if (window.scrollY < offsetHeight - windowHeight) {\r\n                        requestAnimationFrame(step);\r\n                    }\r\n                }\r\n\r\n                requestAnimationFrame(step);\r\n            },\r\n            async updateList(state) {\r\n                this.commentState = state; // 提交组件提及时触发父级事件改变状态,被另一子组件监听到\r\n\r\n                const res = await this.getArticleDetail();\r\n                const result = res.data[0].length && res.data[0][0];\r\n                this.currentArticle.commentCount = result.commentCount;\r\n            },\r\n            addGood () {\r\n                // 更新点赞数\r\n                return this.axios({\r\n                    method: 'post',\r\n                    url: '/updateGoods',\r\n                    data: {\r\n                        ip: this.ip,\r\n                        id: this.articleId,\r\n                        vTime: new Date().getTime(),\r\n                        type: 1 //暂时只开放文章点赞(1为文章,2为评论)\r\n                    }\r\n                })\r\n            },\r\n            async updateGoods () {\r\n                try {\r\n                    if (this.goodState) {\r\n                        // 您已经点过赞咯!\r\n                        // 弹窗提示\r\n\r\n                    } else {\r\n                        this.goodState = true;\r\n                        this.goodContent = '您已经点过赞了哟~';\r\n                        await this.addGood();\r\n                        const res = await this.getArticleDetail();\r\n                        const result = res.data[0].length && res.data[0][0];\r\n                        this.currentArticle.good = result.good;\r\n                        // 点赞动画开始\r\n                    }\r\n                }catch (e) {\r\n                    console.log(e)\r\n                }\r\n            },\r\n            getArticleDetail () {\r\n                // 获取文章详细信息\r\n                return this.axios({\r\n                    url: '/getArticleDetail',\r\n                    params: {\r\n                        id: this.articleId\r\n                    }\r\n                })\r\n            },\r\n            getReader() {\r\n                // 获取读者基本信息(24小时内是否阅读过)\r\n                return this.axios({\r\n                    url: '/getViewsInfo',\r\n                    params: {\r\n                        ip: this.ip,\r\n                        id: this.articleId\r\n                    }\r\n                })\r\n            },\r\n            updateViews() {\r\n                // 更新文章阅读量以及blog_views表(暂时还没想好)\r\n                this.axios({\r\n                    method: 'post',\r\n                    url: '/setViews',\r\n                    data: {\r\n                        ip: this.ip,\r\n                        id: this.articleId,\r\n                        vTime: new Date().getTime()\r\n                    }\r\n                })\r\n            }\r\n        },\r\n        async created() {\r\n            let id = this.$route.params[\"id\"];\r\n            if (id) {\r\n                sessionStorage.setItem(\"currArticle\", id);\r\n            } else {\r\n                id = sessionStorage.getItem(\"currArticle\");\r\n            }\r\n            this.articleId = id;\r\n\r\n            try {\r\n                const res = await this.getArticleDetail();\r\n                const result = res.data[0].length && res.data[0][0];\r\n                this.currentArticle.commentCount = result.commentCount;\r\n                this.currentArticle = result;\r\n                this.currentArticle.title = result.title;\r\n                this.currentArticle.content = result.content;\r\n                this.currentArticle.views = result.views;\r\n                this.currentArticle.tags = result.tags;\r\n                this.currentArticle.good = result.good;\r\n                this.currentArticle.ctime = result.ctime;\r\n            }catch (e) {\r\n                console.log(e)\r\n            }\r\n        },\r\n        async beforeMount() {\r\n            const store = this.$store;\r\n            store.commit(\"setLeftTagsLine\", {\r\n                leftCol: 24\r\n            });\r\n\r\n            // 文章阅读量更新操作...\r\n            try {\r\n                const readerResult = await this.getReader();\r\n                const data = readerResult.data[0];\r\n                if (readerResult.data[1].length) {\r\n                    // 当前用户已经点赞过(限IP)\r\n                    this.goodState = true;\r\n                    this.goodContent = '您已经点过赞了哟~';\r\n                }\r\n                if (data.length) {\r\n                    const vTime = data[0]['vtime'];\r\n                    let difference = (new Date().getTime() - vTime) / 1000 / 60 / 60;\r\n                    if (difference > 24) {\r\n                        // 一天内的阅读次数只算一次\r\n                        await this.updateViews();\r\n                    }\r\n                } else {\r\n                    await this.updateViews();\r\n                }\r\n            }catch (e) {\r\n                console.log(e)\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .box-card:nth-of-type(2) {\r\n        margin-top: 20px;\r\n    }\r\n\r\n    .blog-reply-good {\r\n        padding-right: 15px;\r\n        text-align: right;\r\n        cursor: pointer;\r\n    }\r\n\r\n    .blog-reply-good > span:hover {\r\n        color: #409EFF;\r\n    }\r\n\r\n    .blog-title {\r\n        padding-left: 15px;\r\n    }\r\n\r\n    .blog-title > h1 {\r\n        font-size: 30px;\r\n        font-weight: bold;\r\n        padding: 15px 0 10px 0;\r\n        font-family: \"Helvetica Neue\", Helvetica, \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", \"微软雅黑\", Arial, sans-serif;\r\n    }\r\n\r\n    .blog-title > p {\r\n        border-bottom: 1px solid #dedede;\r\n        padding-bottom: 5px;\r\n    }\r\n\r\n    .blog-title > p > span {\r\n        line-height: 1.5;\r\n        color: #969696;\r\n    }\r\n\r\n    .blog-title > p > .el-tag {\r\n        line-height: 17px;\r\n        height: 20px;\r\n        padding: 0 5px;\r\n        margin-left: 5px;\r\n        color: #67c23a;\r\n    }\r\n\r\n    .blog-title > p > span.reset-left-margin {\r\n        margin-left: 0;\r\n    }\r\n\r\n    .blog-reply-good span.self-good {\r\n        display: inline-block;\r\n        width: 65px;\r\n        vertical-align: bottom;\r\n        height: 65px;\r\n        background: url(\"../assets/img/heart.png\") no-repeat;\r\n        background-position: -15px -10px;\r\n        transform: scale(0.6) translate(23px, 33px);\r\n        cursor: pointer;\r\n        -webkit-transition: background-position 1s steps(28);\r\n        transition: background-position 1s steps(28);\r\n        -webkit-transition-duration: 0s;\r\n        transition-duration: 0s;\r\n    }\r\n\r\n    .blog-reply-good span.self-good.is-active {\r\n        -webkit-transition-duration: 1s;\r\n        transition-duration: 1s;\r\n        background-position: -2815px -10px;\r\n    }\r\n</style>"]}]}