{"remainingRequest":"D:\\Learn\\blog-person\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Learn\\blog-person\\src\\views\\Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Learn\\blog-person\\src\\views\\Home.vue","mtime":1578502395942},{"path":"D:\\Learn\\blog-person\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1572976728968},{"path":"D:\\Learn\\blog-person\\node_modules\\vue-loader\\lib\\index.js","mtime":1577118252216}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBcnRpY2xlSXRlbSBmcm9tICIuLi9jb21wb25lbnRzL0FydGljbGVJdGVtIjsKaW1wb3J0IHttYXBHZXR0ZXJzLCBtYXBTdGF0ZSwgbWFwTXV0YXRpb25zfSBmcm9tICJ2dWV4IjsKCmV4cG9ydCBkZWZhdWx0IHsKICAgIGRhdGEoKXsKICAgICAgcmV0dXJuIHsKICAgICAgICAgIGl0ZW1MaXN0OiBbXQogICAgICB9CiAgICB9LAogICAgY29tcG9uZW50czogewogICAgICAgIEFydGljbGVJdGVtCiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIC4uLm1hcE11dGF0aW9ucygnaG9tZScsIFsidXBkYXRlQnVzeSJdKSwKICAgICAgICBnZXRBcnRpY2xlTGlzdCAoY291bnQsIGNhbGxiYWNrID0gKCk9Pnt9KSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZmlsdGVyQmxvZykKICAgICAgICAgICAgY2FsbGJhY2soKTsgLy8g5pS55Y+YYnVzeSzmu5rliqjkuI3liqDovb0KICAgICAgICAgICAgdGhpcy5heGlvcyh7CiAgICAgICAgICAgICAgICB1cmw6ICcvZ2V0QXJ0aWNsZUxpc3RMYXp5JywKICAgICAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgICAgICAgIG15Q291bnQ6IGNvdW50LAogICAgICAgICAgICAgICAgICAgIGZpbHRlckJsb2c6IHRoaXMuZmlsdGVyQmxvZwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLml0ZW1MaXN0Lmxlbmd0aCA9IDA7CiAgICAgICAgICAgICAgICByZXMuZGF0YS5mb3JFYWNoKGVsZT0+ewogICAgICAgICAgICAgICAgICAgIGVsZS5jb250ZW50ID0gZWxlLmNvbnRlbnQuc3Vic3RyKDAsIDIwMCk7CiAgICAgICAgICAgICAgICAgICAgZWxlLmN0aW1lID0gdGhpcy4kZGF0ZV9mb3JtYXQoZWxlLmN0aW1lKTsKICAgICAgICAgICAgICAgICAgICBlbGUudXRpbWUgPSBlbGUudXRpbWUgJiYgdGhpcy4kZGF0ZV9mb3JtYXQoZWxlLnV0aW1lKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZW1MaXN0LnB1c2goZWxlKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgY2FsbGJhY2soKTsgLy8g5pS55Y+YYnVzeSzmu5rliqjnu6fnu63liqDovb0KICAgICAgICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgICAgICAgICBjYWxsYmFjaygpOyAvLyDmlLnlj5hidXN5LOa7muWKqOe7p+e7reWKoOi9vQogICAgICAgICAgICB9KQogICAgICAgIH0KICAgIH0sCiAgICB3YXRjaDogewogICAgICAgIGNvdW50ICh2YWwpIHsKICAgICAgICAgICAgaWYgKHZhbCA+IHRoaXMudG90YWxCbG9nKSB7CiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgfQogICAgICAgICAgICAvLyDmoLnpobXpnaLmu5rliqjkuoYs5byA5aeL6K+35rGC5paH56ugCiAgICAgICAgICAgIHRoaXMuZ2V0QXJ0aWNsZUxpc3QodmFsLCB0aGlzLnVwZGF0ZUJ1c3kpCiAgICAgICAgfSwKICAgICAgICBmaWx0ZXJCbG9nICgpIHsKICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5idXN5LCB0aGlzLmNvdW50LCB0aGlzLnRvdGFsQmxvZykKICAgICAgICAgICAgdGhpcy5nZXRBcnRpY2xlTGlzdCh0aGlzLmNvdW50KTsKICAgICAgICAgICAgdGhpcy4kbGlzdGVuZXJzWyJpbml0QmxvZ0xlbmd0aCJdKCk7IC8vIOmHjee9rnRvdGFsQmxvZwogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2hvbWUvdXBkYXRlQ291bnQnLCAwKTsgLy8g6YeN572uY291bnQKICAgICAgICB9CiAgICB9LAogICAgY29tcHV0ZWQ6IHsKICAgICAgICAuLi5tYXBHZXR0ZXJzKHsKICAgICAgICAgICAgcGhvbmU6ICJnZXREZXZpY2VJc1Bob25lIgogICAgICAgIH0pLAogICAgICAgIC4uLm1hcEdldHRlcnMoImhvbWUiLCBbIm5vTW9yZSJdKSwKICAgICAgICAuLi5tYXBTdGF0ZSgiaG9tZSIsIFsiY291bnQiLCAiYnVzeSIsICJ0b3RhbEJsb2ciLCAiZmlsdGVyQmxvZyJdKQogICAgfSwKICAgIGNyZWF0ZWQoKSB7CiAgICAgICAgY29uc3Qgc3RvcmUgPSB0aGlzLiRzdG9yZTsKICAgICAgICBzdG9yZS5jb21taXQoInNldExlZnRUYWdzTGluZSIsIHsKICAgICAgICAgICAgY2xvdWRUYWdzOiAhdGhpcy5waG9uZSwKICAgICAgICAgICAgbGVmdENvbDogdGhpcy5waG9uZSA/IDI0IDogMTYKICAgICAgICB9KTsKICAgICAgICB0aGlzLmdldEFydGljbGVMaXN0KHRoaXMuY291bnQpOwogICAgfQp9Cg=="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div>\n        <div v-if=\"itemList.length\">\n            <div class=\"row\" v-for=\"item in itemList\" :key=\"item.id\">\n                <article-item :article=\"item\"/>\n            </div>\n            <transition name=\"el-fade-in-linear\">\n                <div v-show=\"!busy && count < totalBlog\"\n                     v-loading=\"true\"\n                     element-loading-text=\"拼命加载中\"\n                     style=\"height: 100px\">\n                </div>\n            </transition>\n        </div>\n        <div v-else class=\"empty-show\">\n            这里空空如也,赶紧去创作吧...\n        </div>\n    </div>\n</template>\n\n<script>\n    import ArticleItem from \"../components/ArticleItem\";\n    import {mapGetters, mapState, mapMutations} from \"vuex\";\n\n    export default {\n        data(){\n          return {\n              itemList: []\n          }\n        },\n        components: {\n            ArticleItem\n        },\n        methods: {\n            ...mapMutations('home', [\"updateBusy\"]),\n            getArticleList (count, callback = ()=>{}) {\n                console.log(this.filterBlog)\n                callback(); // 改变busy,滚动不加载\n                this.axios({\n                    url: '/getArticleListLazy',\n                    params: {\n                        myCount: count,\n                        filterBlog: this.filterBlog\n                    }\n                }).then(res => {\n                    this.itemList.length = 0;\n                    res.data.forEach(ele=>{\n                        ele.content = ele.content.substr(0, 200);\n                        ele.ctime = this.$date_format(ele.ctime);\n                        ele.utime = ele.utime && this.$date_format(ele.utime);\n                        this.itemList.push(ele);\n                    });\n                    callback(); // 改变busy,滚动继续加载\n                }).catch(err => {\n                    console.log(err);\n                    callback(); // 改变busy,滚动继续加载\n                })\n            }\n        },\n        watch: {\n            count (val) {\n                if (val > this.totalBlog) {\n                    return\n                }\n                // 根页面滚动了,开始请求文章\n                this.getArticleList(val, this.updateBusy)\n            },\n            filterBlog () {\n                console.log(this.busy, this.count, this.totalBlog)\n                this.getArticleList(this.count);\n                this.$listeners[\"initBlogLength\"](); // 重置totalBlog\n                this.$store.commit('home/updateCount', 0); // 重置count\n            }\n        },\n        computed: {\n            ...mapGetters({\n                phone: \"getDeviceIsPhone\"\n            }),\n            ...mapGetters(\"home\", [\"noMore\"]),\n            ...mapState(\"home\", [\"count\", \"busy\", \"totalBlog\", \"filterBlog\"])\n        },\n        created() {\n            const store = this.$store;\n            store.commit(\"setLeftTagsLine\", {\n                cloudTags: !this.phone,\n                leftCol: this.phone ? 24 : 16\n            });\n            this.getArticleList(this.count);\n        }\n    }\n</script>\n\n<style scoped>\n    .row {\n        margin-bottom: 20px;\n    }\n\n    .empty-show {\n        color: #909399;\n    }\n</style>\n"]}]}